(function(e){function t(t){for(var i,s,_=t[0],r=t[1],c=t[2],d=0,u=[];d<_.length;d++)s=_[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&u.push(o[s][0]),o[s]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);l&&l(t);while(u.length)u.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,_=1;_<n.length;_++){var r=n[_];0!==o[r]&&(i=!1)}i&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},o={user:0},a=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="https://localhost:8080/";var _=window["wpcalMainWebpackJsonp"]=window["wpcalMainWebpackJsonp"]||[],r=_.push.bind(_);_.push=t,_=_.slice();for(var c=0;c<_.length;c++)t(_[c]);var l=r;a.push([1,"chunk-vendors","chunk-common"]),n()})({"0506":function(e,t,n){"use strict";var i=n("afa7"),o=n.n(i);o.a},"0a1f":function(e,t,n){"use strict";var i=n("7869"),o=n.n(i);o.a},1:function(e,t,n){e.exports=n("70e2")},"70e2":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[e.main_cont_class],style:e.branding_styles,attrs:{id:"wpcal_user_app"}},[n("IconFillSVG"),n("router-view")],1)},a=[],s=n("d1ff"),_=n("93fb"),r={components:{IconFillSVG:_["a"]},computed:{main_cont_class:function(){var e=this.$store.getters.get_app_cont_width;return!e||e<700?"narrow":e>=700&&e<1e3?"extended":e>=1e3?"wide":"narrow"},branding_styles:function(){var e={},t=this.$store.getters.get_general_settings;return t.hasOwnProperty("branding_color")&&t.branding_color&&(e["--accentClrRGB"]=Object(s["k"])(t.branding_color)),e}},methods:{handle_router_request:function(){var e=Object(s["j"])("wpcal_r");e&&"/"!=e&&"/booking"!=e?this.$router.push(e):this.$router.push("/booking")},may_apply_branding_font:function(){var e=this;setTimeout((function(){var t=e.$store.getters.get_general_settings;e._isEmpty(t)?e.may_apply_branding_font():t.hasOwnProperty("branding_font")&&t.branding_font&&(document.querySelector("head").innerHTML+='<style type="text/css">:root{--font-family:'+t.branding_font+"; --font-family-med:"+t.branding_font+"; --font-family-med-weight:bold;}</style>")}),50)}},created:function(){var e=this;this.$store.dispatch("init"),this.handle_router_request(),window.addEventListener("popstate",(function(t){e.handle_router_request()})),this.may_apply_branding_font()}},c=r,l=(n("0506"),n("2877")),d=Object(l["a"])(c,o,a,!1,null,"4e29a9d5",null),u=d.exports,p=(n("d3b7"),n("25f0"),n("3ca3"),n("ddb0"),n("2b3d"),n("8c4f")),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},b=[],f=(n("b0c0"),{methods:{check_and_route:function(){"user_home"==this.$route.name&&"undefined"!==typeof wpcal_booking_service_id&&wpcal_booking_service_id&&this.$router.push("booking")}},mounted:function(){this.check_and_route()}}),h=f,m=Object(l["a"])(h,g,b,!1,null,null,null),v=m.exports,k=n("eb8b"),w=n("e0f2"),y=function(){var e,t=this,n=t.$createElement,i=t._self._c||n;return i("div",[i("div",{attrs:{id:"wpcal-widget"}},[i("div",{staticClass:"widget-main state-confirmation cf"},[i("div",{staticClass:"event-preset"},[i("img",{attrs:{src:t.service_admin_details.profile_picture}}),i("div",{staticClass:"inviter-name"},[t._v(" "+t._s(t.service_admin_details.display_name)+" ")]),i("div",{staticClass:"confimation-confirmed"},[t._v(" "+t._s(t.__("Hello","wpcal"))+" "+t._s(t._f("wpcal_get_firstname")(t.booking_details.invitee_name))+","),i("br"),t._v(" "+t._s(t.booking_status_txt)+" ")]),i("div",{staticClass:"event-type-name",class:(e={},e["clr-"+t.service_details.color]=!0,e)},[t._v(" "+t._s(t.service_details.name)+" ")]),"-5"==t.booking_details.status&&t.redirect_text?i("div",[t._v(" "+t._s(t.redirect_text)+" ")]):t._e(),"1"==t.booking_details.status?i("div",[i("div",{staticClass:"event-type-duration"},[t._v(" "+t._s(t._f("wpcal_unix_to_from_to_time_full_date_day_tz")(t.booking_details.booking_from_time,t.booking_details.booking_to_time,t.tz,t.time_format))+". ")]),i("LocationAdvanced",{attrs:{type:"display_user_after_booking_location",location_details:t.booking_details.location,service_admin_details:t.service_admin_details}})],1):t._e(),"booking_view_confirmed"==t.$route.name&&1==t.booking_details.status&&t.booking_details.is_invitee_alert_by_calendar?i("div",{staticClass:"txt-h4",staticStyle:{margin:"50px 0 20px","font-size":"16px"}},[i("span",{domProps:{innerHTML:t._s(t.Tsprintf(t.__("A calendar invitation has been sent to %s your email address -","wpcal"),"<br />"))}}),i("span",{staticStyle:{"font-weight":"500"}},[t._v(t._s(t.booking_details.invitee_email))])]):t._e(),1!=t.booking_details.status||t.booking_details.is_invitee_alert_by_calendar?t._e():i("div",{staticClass:"txt-h4",staticStyle:{margin:"50px 0 20px","font-size":"16px"}},[i("a",{staticStyle:{color:"#567bf3","text-decoration":"underline"},attrs:{href:t.booking_details.add_event_to_google_calendar_url,target:"_blank"}},[t._v(t._s(t.__("Add to","wpcal"))+" Google Calendar")]),t._v("→ "),i("a",{staticStyle:{color:"#567bf3","text-decoration":"underline"},attrs:{href:t.booking_details.download_ics_url,target:"_blank"}},[t._v(t._s(t.__("Add to","wpcal"))+" iCal/Outlook ")]),t._v("→ ")]),"booking_view"!=t.$route.name||t.is_booking_slot_time_passed?t._e():i("div",{staticStyle:{"margin-top":"20px"}},[t.can_show_rechedule_option?i("router-link",{staticClass:"btn",attrs:{to:"/booking/reschedule/"+t.booking_unique_link}},[t._v(t._s(t.__("Reschedule","wpcal")))]):t._e(),t.can_show_cancel_option?i("a",{staticClass:"btn cancel pointer",on:{click:function(e){return t.show_cancel_confirmation(t.booking_details)}}},[t._v(" "+t._s(t.__("Cancel","wpcal"))+" ")]):t._e()],1)])]),i("BookingBottomPoweredBy")],1),i("modal",{staticStyle:{"z-index":"9999"},attrs:{name:"booking_cancel_confirm_modal",height:"auto"}},[i("div",{staticStyle:{"font-size":"16px",padding:"20px"}},[i("div",[t._v(" "+t._s(t.__("Are you sure you want to cancel this meeting?","wpcal"))+" ")]),t._v(" "+t._s(t._f("wpcal_unix_to_from_to_time_full_date_day_tz")(t.booking_details.booking_from_time,t.booking_details.booking_to_time,t.tz,t.time_format))+". "),i("br"),i("div",{staticStyle:{"margin-top":"10px"}},[t._v(" "+t._s(t.__("Reason for cancellation:","wpcal"))+" ")]),i("div",{staticClass:"form-row",staticStyle:{width:"90%"}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.cancel_reason,expression:"cancel_reason"}],attrs:{rows:"2"},domProps:{value:t.cancel_reason},on:{input:function(e){e.target.composing||(t.cancel_reason=e.target.value)}}})]),i("div",[i("button",{staticClass:"wpc-btn primary lg",staticStyle:{margin:"10px 10px 10px 0","padding-left":"10px","padding-right":"10px"},attrs:{type:"button",disabled:!t.cancel_booking_btn_is_enabled},on:{click:function(e){return t.cancel_booking(t.booking_details)}}},[t._v(" "+t._s(t.__("Yes, Cancel it.","wpcal"))+" ")]),i("button",{staticClass:"wpc-btn primary lg",staticStyle:{margin:"10px 10px 10px 0","padding-left":"10px","padding-right":"10px"},attrs:{type:"button"},on:{click:function(e){return t.$modal.hide("booking_cancel_confirm_modal")}}},[t._v(" "+t._s(t.__("No, don't.","wpcal"))+" ")])])])])],1)},x=[],$=n("2f7b"),q=n("81cb"),j=n("bc3a"),O=n.n(j),S={components:{LocationAdvanced:$["a"],BookingBottomPoweredBy:q["a"]},data:function(){return{service_details:{},service_admin_details:{},booking_details:{},booking_unique_link:"",cancel_reason:"",redirect_text:"",cancel_booking_btn_is_enabled:!0}},computed:{booking_status_txt:function(){var e="";return this.booking_details.hasOwnProperty("status")?"1"==this.booking_details.status?(e=this.__("our meeting is confirmed!","wpcal"),"booking_view_rescheduled"===this.$route.name&&(e=this.__("our meeting is rescheduled successfully!","wpcal"))):"-1"==this.booking_details.status||"-2"==this.booking_details.status?(e=this.__("our meeting is cancelled!","wpcal"),"booking_view_cancelled"===this.$route.name&&(e=this.__("our meeting is cancelled successfully!","wpcal"))):e="-5"==this.booking_details.status?this.__("our meeting is rescheduled!","wpcal"):this.__("Technical error with meeting status.","wpcal"):e="...",e},is_booking_slot_time_passed:function(){var e=Math.round((new Date).getTime()/1e3);return this.booking_details&&this.booking_details.booking_to_time<e},can_show_rechedule_option:function(){return this.booking_details&&"1"==this.booking_details.status&&!this.is_booking_slot_time_passed},can_show_cancel_option:function(){return this.booking_details&&"1"==this.booking_details.status&&!this.is_booking_slot_time_passed}},methods:{load_booking_view:function(){var e=this;this.booking_unique_link=this.$route.params.unique_link;var t="view_booking",n={};n[t]={unique_link:this.booking_unique_link};var i={action:"wpcal_process_user_ajax_request",wpcal_request:n};O.a.post(window.wpcal_ajax.ajax_url,i).then((function(n){"success"==n.data[t].status&&(e.booking_details=n.data[t].booking_data,e.service_details=n.data[t].service_data,e.service_admin_details=n.data[t].service_admin_data,e.may_redirect_to_new_booking(),"booking_view_cancel"===e.$route.name&&e.$nextTick((function(){e.can_show_cancel_option&&e.show_cancel_confirmation()})))})).catch((function(e){console.log(e)}))},may_redirect_to_new_booking:function(){var e=this;"-5"==this.booking_details.status&&this.booking_details.rescheduled_booking_unique_link&&(this.redirect_text=this.__("Redirecting to new booking...","wpcal"),setTimeout((function(){e.$router.push("/booking/view/"+e.booking_details.rescheduled_booking_unique_link)}),2e3))},show_cancel_confirmation:function(){console.log("show confirm?"),this.$modal.show("booking_cancel_confirm_modal",{})},cancel_booking:function(e){var t=this;this.cancel_booking_btn_is_enabled=!1;var n={},i="cancel_booking";n[i]={booking_unique_link:e.unique_link,cancel_reason:this.cancel_reason};var o={action:"wpcal_process_user_ajax_request",wpcal_request:n};O.a.post(window.wpcal_ajax.ajax_url,o).then((function(n){"success"==n.data[i].status&&(t.$modal.hide("booking_cancel_confirm_modal"),t.$router.push("/booking/view/"+e.unique_link+"/cancelled"))})).catch((function(e){console.log(e)})).then((function(){t.$store.dispatch("run_booking_background_tasks_by_unique_link",{unique_link:e.unique_link}),t.cancel_booking_btn_is_enabled=!0}))}},watch:{"$route.name":function(){Object.assign(this.$data,this.$options.data.apply(this)),this.load_booking_view()},"$route.params.unique_link":function(){Object.assign(this.$data,this.$options.data.apply(this)),this.load_booking_view()}},mounted:function(){this.load_booking_view()}},C=S,P=(n("7937"),n("0a1f"),Object(l["a"])(C,y,x,!1,null,"da1f8d6c",null)),T=P.exports;i["default"].use(p["a"]);var M=[{path:"/",name:"user_home",component:v},{path:"/booking",name:"booking",children:[{path:"reschedule/:unique_link/",name:"booking_reschedule"},{path:"schedule_again/:unique_link/",name:"booking_schedule_again"},{path:"confirm",components:{step2:w["a"]}}],component:k["a"]},{path:"/booking/view/:unique_link",name:"booking_view",children:[{path:"confirmed",name:"booking_view_confirmed"},{path:"rescheduled",name:"booking_view_rescheduled"},{path:"cancelled",name:"booking_view_cancelled"},{path:"cancel",name:"booking_view_cancel"}],component:T}],z=new p["a"]({mode:"abstract",routes:M});z.afterEach((function(e,t){var n=function(e){var t=e.fullPath,n=window.location.href,i=new URL(n);i.searchParams.set("wpcal_r",t),"/"!=t&&"/booking"!=t||i.searchParams.delete("wpcal_r");var o=i.toString(),a=Object(s["j"])("wpcal_r");a!=t&&window.history.pushState(null,"",o)};n(e)}));var B=z,E=n("2f62"),L=n("cdab");i["default"].use(E["a"]);var A=new E["a"].Store({strict:!0,modules:{common:L["a"]},state:{client_end:"user"}}),R=(n("399f"),n("1619"),n("751a"),n("1881")),G=n.n(R),H=n("404b"),F=n.n(H),I=n("1dce"),J=n.n(I),N=n("7f53"),V=n("2242"),W=n("e399"),D=n.n(W);n("2068");n.p=window.__wpcal_dist_url,window.__wpcal_client_end="user",i["default"].use(G.a,{dialog:!0}),i["default"].component("v-date-picker",F.a),i["default"].use(J.a),i["default"].use(N["a"],V["a"]);var U={timeout:5e3,position:"topRight",drag:!1};i["default"].use(D.a,U),i["default"].config.productionTip=!1,i["default"].prototype.__=s["b"],i["default"].prototype._x=s["e"],i["default"].prototype._n=s["c"],i["default"].prototype._nx=s["d"],i["default"].prototype.T__=s["b"],i["default"].prototype.T_x=s["e"],i["default"].prototype.T_n=s["c"],i["default"].prototype.T_nx=s["d"],i["default"].prototype.Tsprintf=s["a"];var Y=null;document.addEventListener("wpcal_load_booking_widget",(function(){Object(s["h"])("event fired received: wpcal_load_booking_widget"),document.querySelector("#wpcal_user_app")&&document.querySelector("#wpcal_user_app.loading-indicator-initial")&&(Y&&(Y.$destroy(),Y=null),Y||(Object(s["h"])("Triggering wpcal vue instance"),Y=new i["default"]({router:B,store:A,render:function(e){return e(u)}}).$mount("#wpcal_user_app")))}))},7869:function(e,t,n){},7937:function(e,t,n){"use strict";var i=n("c71c"),o=n.n(i);o.a},afa7:function(e,t,n){},c71c:function(e,t,n){}});
//# sourceMappingURL=user.min.js.map