(function(e){function t(t){for(var i,s,_=t[0],c=t[1],r=t[2],u=0,d=[];u<_.length;u++)s=_[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);l&&l(t);while(d.length)d.shift()();return a.push.apply(a,r||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,_=1;_<n.length;_++){var c=n[_];0!==o[c]&&(i=!1)}i&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},o={user:0},a=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="https://localhost:8080/";var _=window["wpcalMainWebpackJsonp"]=window["wpcalMainWebpackJsonp"]||[],c=_.push.bind(_);_.push=t,_=_.slice();for(var r=0;r<_.length;r++)t(_[r]);var l=c;a.push([1,"chunk-vendors","chunk-common"]),n()})({"0a1f":function(e,t,n){"use strict";var i=n("7869"),o=n.n(i);o.a},1:function(e,t,n){e.exports=n("70e2")},"36d7":function(e,t,n){"use strict";var i=n("7326"),o=n.n(i);o.a},6670:function(e,t,n){"use strict";var i=n("c88d"),o=n.n(i);o.a},"70e2":function(e,t,n){"use strict";n.r(t);n("e623"),n("e379"),n("5dc8"),n("37e1");var i=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"wpcal_user_app"}},[n("router-view")],1)},a=[],s={created:function(){this.$store.dispatch("init")}},_=s,c=(n("36d7"),n("2877")),r=Object(c["a"])(_,o,a,!1,null,"854cfce8",null),l=r.exports,u=n("8c4f"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},p=[],g=(n("b0c0"),{methods:{check_and_route:function(){"user_home"==this.$route.name&&"undefined"!==typeof wpcal_booking_service_id&&wpcal_booking_service_id&&this.$router.push("booking")}},mounted:function(){this.check_and_route()}}),b=g,f=Object(c["a"])(b,d,p,!1,null,null,null),m=f.exports,h=n("eb8b"),k=n("e0f2"),v=function(){var e,t=this,n=t.$createElement,i=t._self._c||n;return i("div",[i("div",{attrs:{id:"wpcal-widget"}},[i("div",{staticClass:"widget-main state-confirmation cf"},[i("div",{staticClass:"event-preset"},[i("img",{attrs:{src:t.service_admin_details.profile_picture}}),i("div",{staticClass:"inviter-name"},[t._v(" "+t._s(t.service_admin_details.display_name)+" ")]),i("div",{staticClass:"confimation-confirmed"},[t._v(" Hello "+t._s(t._f("wpcal_get_firstname")(t.booking_details.invitee_name))+","),i("br"),t._v(" "+t._s(t.booking_status_txt)+" ")]),i("div",{staticClass:"event-type-name",class:(e={},e["clr-"+t.service_details.color]=!0,e)},[t._v(" "+t._s(t.service_details.name)+" ")]),"-5"==t.booking_details.status&&t.redirect_text?i("div",[t._v(" "+t._s(t.redirect_text)+" ")]):t._e(),"1"==t.booking_details.status?i("div",[i("div",{staticClass:"event-type-duration"},[t._v(" "+t._s(t._f("wpcal_unix_to_from_to_time_full_date_day_tz")(t.booking_details.booking_from_time,t.booking_details.booking_to_time,t.tz,t.time_format))+". ")]),i("LocationAdvanced",{attrs:{type:"display_user_after_booking_location",location_details:t.booking_details.location,service_admin_details:t.service_admin_details}})],1):t._e(),"booking_view_confirmed"==t.$route.name&&1==t.booking_details.status&&t.booking_details.is_invitee_alert_by_calendar?i("div",{staticClass:"txt-h4",staticStyle:{margin:"50px 0 20px","font-size":"16px"}},[t._v(" A calendar invitation has been sent to"),i("br"),t._v(" your email address - "),i("span",{staticStyle:{"font-weight":"500"}},[t._v(t._s(t.booking_details.invitee_email))])]):t._e(),1!=t.booking_details.status||t.booking_details.is_invitee_alert_by_calendar?t._e():i("div",{staticClass:"txt-h4",staticStyle:{margin:"50px 0 20px","font-size":"16px"}},[i("a",{staticStyle:{color:"#567bf3","text-decoration":"underline"},attrs:{href:t.booking_details.add_event_to_google_calendar_url,target:"_blank"}},[t._v("Add to Google Calendar ")]),t._v("→ "),i("a",{staticStyle:{color:"#567bf3","text-decoration":"underline"},attrs:{href:t.booking_details.download_ics_url,target:"_blank"}},[t._v("Add to iCal/Outlook ")]),t._v("→ ")]),"booking_view"!=t.$route.name||t.is_booking_slot_time_passed?t._e():i("div",{staticStyle:{"margin-top":"20px"}},[t.can_show_rechedule_option?i("router-link",{staticClass:"btn",attrs:{to:"/booking/reschedule/"+t.booking_unique_link}},[t._v("Reschedule")]):t._e(),t.can_show_cancel_option?i("a",{staticClass:"btn cancel pointer",on:{click:function(e){return t.show_cancel_confirmation(t.booking_details)}}},[t._v(" Cancel ")]):t._e()],1)])]),"user"===t.client_end?i("div",{staticStyle:{"font-size":"13px","text-align":"center","padding-top":"5px"}},[t._v(" Want your own scheduler for Free? This booking is powered by "),i("a",{staticStyle:{color:"#131336"},attrs:{href:"https://wpcal.io/?utm_source=wpcal_plugin&utm_medium=booking_bottom_link",target:"_blank"}},[t._v("WPCal.io")])]):t._e()]),i("modal",{staticStyle:{"z-index":"9999"},attrs:{name:"booking_cancel_confirm_modal"}},[i("div",{staticStyle:{"font-size":"16px",padding:"20px"}},[i("div",[t._v("Are you sure you want to cancel this meeting?")]),t._v(" "+t._s(t._f("wpcal_unix_to_from_to_time_full_date_day_tz")(t.booking_details.booking_from_time,t.booking_details.booking_to_time,t.tz,t.time_format))+". "),i("br"),i("div",{staticStyle:{"margin-top":"10px"}},[t._v("Reason for cancellation:")]),i("div",{staticClass:"form-row",staticStyle:{width:"90%"}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.cancel_reason,expression:"cancel_reason"}],attrs:{rows:"2"},domProps:{value:t.cancel_reason},on:{input:function(e){e.target.composing||(t.cancel_reason=e.target.value)}}})]),i("div",[i("button",{staticClass:"wpc-btn primary lg",staticStyle:{margin:"10px 10px 10px 0","padding-left":"10px","padding-right":"10px"},attrs:{type:"button",disabled:!t.cancel_booking_btn_is_enabled},on:{click:function(e){return t.cancel_booking(t.booking_details)}}},[t._v(" Yes, Cancel it. ")]),i("button",{staticClass:"wpc-btn primary lg",staticStyle:{margin:"10px 10px 10px 0","padding-left":"10px","padding-right":"10px"},attrs:{type:"button"},on:{click:function(e){return t.$modal.hide("booking_cancel_confirm_modal")}}},[t._v(" No, don't. ")])])])])],1)},w=[],y=n("2f7b"),x=n("bc3a"),$=n.n(x),q={components:{LocationAdvanced:y["a"]},data:function(){return{service_details:{},service_admin_details:{},booking_details:{},booking_unique_link:"",cancel_reason:"",redirect_text:"",cancel_booking_btn_is_enabled:!0}},computed:{booking_status_txt:function(){var e="";return this.booking_details.hasOwnProperty("status")?"1"==this.booking_details.status?(e="our meeting is confirmed!","booking_view_rescheduled"===this.$route.name&&(e="our meeting is rescheduled successfully!")):"-1"==this.booking_details.status||"-2"==this.booking_details.status?(e="our meeting is cancelled!","booking_view_cancelled"===this.$route.name&&(e="our meeting is cancelled successfully!")):e="-5"==this.booking_details.status?"our meeting is rescheduled!":"Technical error with meeting status.":e="...",e},is_booking_slot_time_passed:function(){var e=Math.round((new Date).getTime()/1e3);return this.booking_details&&this.booking_details.booking_to_time<e},can_show_rechedule_option:function(){return this.booking_details&&"1"==this.booking_details.status&&!this.is_booking_slot_time_passed},can_show_cancel_option:function(){return this.booking_details&&"1"==this.booking_details.status&&!this.is_booking_slot_time_passed}},methods:{load_booking_view:function(){var e=this;this.booking_unique_link=this.$route.params.unique_link;var t="view_booking",n={};n[t]={unique_link:this.booking_unique_link};var i={action:"wpcal_process_user_ajax_request",wpcal_request:n};$.a.post(window.wpcal_ajax.ajax_url,i).then((function(n){"success"==n.data[t].status&&(e.booking_details=n.data[t].booking_data,e.service_details=n.data[t].service_data,e.service_admin_details=n.data[t].service_admin_data,e.may_redirect_to_new_booking(),"booking_view_cancel"===e.$route.name&&e.$nextTick((function(){e.can_show_cancel_option&&e.show_cancel_confirmation()})))})).catch((function(e){console.log(e)}))},may_redirect_to_new_booking:function(){var e=this;"-5"==this.booking_details.status&&this.booking_details.rescheduled_booking_unique_link&&(this.redirect_text="Redirecting to new booking...",setTimeout((function(){e.$router.push("/booking/view/"+e.booking_details.rescheduled_booking_unique_link)}),2e3))},show_cancel_confirmation:function(){console.log("show confirm?"),this.$modal.show("booking_cancel_confirm_modal",{})},cancel_booking:function(e){var t=this;this.cancel_booking_btn_is_enabled=!1;var n={},i="cancel_booking";n[i]={booking_unique_link:e.unique_link,cancel_reason:this.cancel_reason};var o={action:"wpcal_process_user_ajax_request",wpcal_request:n};$.a.post(window.wpcal_ajax.ajax_url,o).then((function(n){"success"==n.data[i].status&&(t.$modal.hide("booking_cancel_confirm_modal"),t.$router.push("/booking/view/"+e.unique_link+"/cancelled"))})).catch((function(e){console.log(e)})).then((function(){t.$store.dispatch("run_booking_background_tasks_by_unique_link",{unique_link:e.unique_link}),t.cancel_booking_btn_is_enabled=!0}))}},watch:{"$route.name":function(){Object.assign(this.$data,this.$options.data.apply(this)),this.load_booking_view()},"$route.params.unique_link":function(){Object.assign(this.$data,this.$options.data.apply(this)),this.load_booking_view()}},mounted:function(){this.load_booking_view()}},j=q,S=(n("6670"),n("0a1f"),Object(c["a"])(j,v,w,!1,null,"27310eca",null)),C=S.exports;i["default"].use(u["a"]);var O=[{path:"/",name:"user_home",component:m},{path:"/booking",name:"booking",children:[{path:"reschedule/:unique_link/",name:"booking_reschedule"},{path:"schedule_again/:unique_link/",name:"booking_schedule_again"},{path:"confirm",components:{step2:k["a"]}}],component:h["a"]},{path:"/booking/view/:unique_link",name:"booking_view",children:[{path:"confirmed",name:"booking_view_confirmed"},{path:"rescheduled",name:"booking_view_rescheduled"},{path:"cancelled",name:"booking_view_cancelled"},{path:"cancel",name:"booking_view_cancel"}],component:C}],P=new u["a"]({routes:O}),z=P,M=n("2f62"),T=n("cdab");i["default"].use(M["a"]);var A=new M["a"].Store({strict:!0,modules:{common:T["a"]},state:{client_end:"user"}}),E=(n("399f"),n("1619"),n("751a"),n("1881")),L=n.n(E),R=n("404b"),W=n.n(R),D=n("1dce"),J=n.n(D),N=n("7f53"),F=n("2242"),G=n("e399"),H=n.n(G);n("2068");n.p=window.__wpcal_dist_url,window.__wpcal_client_end="user",i["default"].use(L.a,{dialog:!0}),i["default"].component("v-date-picker",W.a),i["default"].use(J.a),i["default"].use(N["a"],F["a"]);var Y={timeout:5e3,position:"topRight",drag:!1};i["default"].use(H.a,Y),i["default"].config.productionTip=!1,document.addEventListener("DOMContentLoaded",(function(){new i["default"]({router:z,store:A,render:function(e){return e(l)}}).$mount("#wpcal_user_app")}))},7326:function(e,t,n){},7869:function(e,t,n){},c88d:function(e,t,n){}});
//# sourceMappingURL=user.js.map